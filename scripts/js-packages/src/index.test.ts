import { Bridge } from "./index"

test('Bridge.stringify convert JSON string to URL query', () => {
    let patterns: {json: string, expected: string}[] = [
        { 
            json: '{"a": "b"}',
            expected: "a=b",
        },
        { 
            json: '{"a": { "b": "c" }}',
            expected: "a%5Bb%5D=c",
        },
        { 
            json: '{"a": "b", "c": ["d", "e=f"], "f": [["g"], ["h"]]}', 
            expected: "a=b&c%5B0%5D=d&c%5B1%5D=e%3Df&f%5B0%5D%5B0%5D=g&f%5B1%5D%5B0%5D=h",
        },
        { 
            json: '{"order":{"id":"0","name":"案件名"},"blackboard":{"id":"0","blackboardTemplateId":"0","layoutTypeId":"1","photosCount":"0","contents":[{"itemName":"工事名","body":"テスト案件","displayFlg":"true","position":"1"},{"itemName":"一二三四五六七八","body":"一二三四五六七八九〇一二三四","displayFlg":"true","position":"2"},{"itemName":"備考","body":"備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。備考は最大二百文字。","displayFlg":"true","position":"3"},{"itemName":"施工日","body":"2222/06/03","displayFlg":"true","position":"4"},{"itemName":"施工者","body":"株式会社いっちーああああ","displayFlg":"true","position":"5"}],"miniatureMapUrl":"./miniature-map.jpeg"},"color":"green","scale":"1","characterWidthRatio":"0.6","isShowEmptyMiniatureMap":"false","isHiddenNoneAndEmptyMiniatureMap":"false","remarksHorizontalAlign":"left","remarksTextSize":"medium","remarksVerticalAlign":"top","firstRowBlackboardItemBodyType":"initial_value","firstRowBlackboardItemBody":"","opacity":"1","isEdged":"true"}', 
            expected: "order%5Bid%5D=0&order%5Bname%5D=%E6%A1%88%E4%BB%B6%E5%90%8D&blackboard%5Bid%5D=0&blackboard%5BblackboardTemplateId%5D=0&blackboard%5BlayoutTypeId%5D=1&blackboard%5BphotosCount%5D=0&blackboard%5Bcontents%5D%5B0%5D%5BitemName%5D=%E5%B7%A5%E4%BA%8B%E5%90%8D&blackboard%5Bcontents%5D%5B0%5D%5Bbody%5D=%E3%83%86%E3%82%B9%E3%83%88%E6%A1%88%E4%BB%B6&blackboard%5Bcontents%5D%5B0%5D%5BdisplayFlg%5D=true&blackboard%5Bcontents%5D%5B0%5D%5Bposition%5D=1&blackboard%5Bcontents%5D%5B1%5D%5BitemName%5D=%E4%B8%80%E4%BA%8C%E4%B8%89%E5%9B%9B%E4%BA%94%E5%85%AD%E4%B8%83%E5%85%AB&blackboard%5Bcontents%5D%5B1%5D%5Bbody%5D=%E4%B8%80%E4%BA%8C%E4%B8%89%E5%9B%9B%E4%BA%94%E5%85%AD%E4%B8%83%E5%85%AB%E4%B9%9D%E3%80%87%E4%B8%80%E4%BA%8C%E4%B8%89%E5%9B%9B&blackboard%5Bcontents%5D%5B1%5D%5BdisplayFlg%5D=true&blackboard%5Bcontents%5D%5B1%5D%5Bposition%5D=2&blackboard%5Bcontents%5D%5B2%5D%5BitemName%5D=%E5%82%99%E8%80%83&blackboard%5Bcontents%5D%5B2%5D%5Bbody%5D=%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82%E5%82%99%E8%80%83%E3%81%AF%E6%9C%80%E5%A4%A7%E4%BA%8C%E7%99%BE%E6%96%87%E5%AD%97%E3%80%82&blackboard%5Bcontents%5D%5B2%5D%5BdisplayFlg%5D=true&blackboard%5Bcontents%5D%5B2%5D%5Bposition%5D=3&blackboard%5Bcontents%5D%5B3%5D%5BitemName%5D=%E6%96%BD%E5%B7%A5%E6%97%A5&blackboard%5Bcontents%5D%5B3%5D%5Bbody%5D=2222%2F06%2F03&blackboard%5Bcontents%5D%5B3%5D%5BdisplayFlg%5D=true&blackboard%5Bcontents%5D%5B3%5D%5Bposition%5D=4&blackboard%5Bcontents%5D%5B4%5D%5BitemName%5D=%E6%96%BD%E5%B7%A5%E8%80%85&blackboard%5Bcontents%5D%5B4%5D%5Bbody%5D=%E6%A0%AA%E5%BC%8F%E4%BC%9A%E7%A4%BE%E3%81%84%E3%81%A3%E3%81%A1%E3%83%BC%E3%81%82%E3%81%82%E3%81%82%E3%81%82&blackboard%5Bcontents%5D%5B4%5D%5BdisplayFlg%5D=true&blackboard%5Bcontents%5D%5B4%5D%5Bposition%5D=5&blackboard%5BminiatureMapUrl%5D=.%2Fminiature-map.jpeg&color=green&scale=1&characterWidthRatio=0.6&isShowEmptyMiniatureMap=false&isHiddenNoneAndEmptyMiniatureMap=false&remarksHorizontalAlign=left&remarksTextSize=medium&remarksVerticalAlign=top&firstRowBlackboardItemBodyType=initial_value&firstRowBlackboardItemBody=&opacity=1&isEdged=true",
        },
    ]

    patterns.forEach(({json, expected}) => {
        let actual = Bridge.stringify(json)
        expect(actual).toBe(expected);  
    });
});